<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="React框架基础指南(2)"><meta name="keywords" content="大前端,React"><meta name="author" content="Heaiwei,undefined"><meta name="copyright" content="Heaiwei"><title>React框架基础指南(2)【何先生的博客】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="icon" href="/favicon.ico"><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
}</script></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#深入了解React之组件的生命周期"><span class="toc-number">1.</span> <span class="toc-text">深入了解React之组件的生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Router原理以及React-Router"><span class="toc-number">2.</span> <span class="toc-text">Router原理以及React-Router</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Router原理"><span class="toc-number">2.1.</span> <span class="toc-text">Router原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React-Router"><span class="toc-number">2.2.</span> <span class="toc-text">React-Router</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React数据管理"><span class="toc-number">3.</span> <span class="toc-text">React数据管理</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">Heaiwei</div><div class="author-info-description">人生得意须尽欢，莫使金樽空对月</div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/Heaiwei" target="_blank">GitHub<i class="icon-dot bg-color8"></i></a><a class="links-button button-hover" href="mailto:haw1165748810@163.com" target="_blank">E-Mail<i class="icon-dot bg-color8"></i></a><a class="links-button button-hover" href="tencent://message/?uin=1165748810&amp;Site=&amp;Menu=yes" target="_blank">QQ<i class="icon-dot bg-color10"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">19</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">17</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">9</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="title-name" href="/">何先生的博客</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">React框架基础指南(2)</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2020-02-28 | 更新于 2020-02-29</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/React/">React</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/大前端/">大前端</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/React/">React</a></div></div></div><div class="main-content"><h2 id="深入了解React之组件的生命周期"><a href="#深入了解React之组件的生命周期" class="headerlink" title="深入了解React之组件的生命周期"></a>深入了解React之组件的生命周期</h2><ol>
<li><p>概念：生命周期就是一个组件从创建到销毁的过程</p>
</li>
<li><p>作用：提供某些节点需要触发的事件</p>
</li>
<li><p>生命周期节点：</p>
<ul>
<li><p>Mounting : 挂载阶段包含</p>
<blockquote>
<p>constructor()</p>
<p>componentWillMount()</p>
<p>componentDidMount()</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">&gt; 	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">&gt; 		<span class="keyword">super</span>(props)</span><br><span class="line">&gt; 		<span class="built_in">console</span>.log(<span class="string">'constructor'</span>)</span><br><span class="line">&gt; 	&#125;</span><br><span class="line">&gt; 	componentWillMount()&#123;</span><br><span class="line">&gt; 		<span class="built_in">console</span>.log(<span class="string">"componentWillMount"</span>)</span><br><span class="line">&gt; 	&#125;</span><br><span class="line">&gt; 	componentDidMount()&#123;</span><br><span class="line">&gt; 		<span class="built_in">console</span>.log(<span class="string">"componentDidMount"</span>)</span><br><span class="line">&gt; 	&#125;</span><br><span class="line">&gt; 	render()&#123;</span><br><span class="line">&gt; 		<span class="built_in">console</span>.log(<span class="string">'render'</span>)</span><br><span class="line">&gt; 		<span class="keyword">return</span>(</span><br><span class="line">&gt; 			<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">&gt; 				App</span></span><br><span class="line"><span class="xml">&gt; 			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&gt; 			);</span><br><span class="line">&gt; 	&#125;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; <span class="comment">//输出结果为：</span></span><br><span class="line">&gt; <span class="comment">//constructor</span></span><br><span class="line">&gt; <span class="comment">//componentWillMount</span></span><br><span class="line">&gt; <span class="comment">//render</span></span><br><span class="line">&gt; <span class="comment">//componentDidMount</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Upading : 运行阶段</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props)</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'初始化数据'</span>,<span class="string">'constructor'</span>)</span><br><span class="line">		<span class="keyword">this</span>.state=&#123;</span><br><span class="line">			data : <span class="string">'Old state'</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	componentWillMount()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"componentWillMount"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	componentDidMount()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"componentDidMount"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//接受父组件传过来的props时候触发</span></span><br><span class="line">	componentWillReceiveProps()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'componentWillReceiveProps'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//子组件是不是应该更新</span></span><br><span class="line">	shouldComponentUpdate()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'shouldComponentUpdate'</span>);</span><br><span class="line">		<span class="comment">//比较特殊的就是需要一个返回值，判断是否更新</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//组件将要更新</span></span><br><span class="line">	componentWillUpdate()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'componentWillUpdate'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//组件更新完成</span></span><br><span class="line">	componentDidUpdate()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'componenetDidUpdate'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	handleClick()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"更新数据！"</span>)</span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">			data: <span class="string">'New state'</span></span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'render'</span>)</span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;div&gt;Props:&#123;<span class="keyword">this</span>.props.data&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			    &lt;button onClick=&#123;() =&gt;&#123;this.handleClick()&#125;&#125;&gt;更新组件&lt;/</span>button&gt;</span><br><span class="line">			&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">		);</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class App extends React.Component&#123;</span></span><br><span class="line"><span class="regexp">	constructor(props)&#123;</span></span><br><span class="line"><span class="regexp">		super(props)</span></span><br><span class="line"><span class="regexp">		this.state=&#123;</span></span><br><span class="line"><span class="regexp">			data : 'Old props'</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		console.log('初始化数据','constructor')</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">	onPropsChange()&#123;</span></span><br><span class="line"><span class="regexp">		console.log('更新props')</span></span><br><span class="line"><span class="regexp">		this.setState(&#123;</span></span><br><span class="line"><span class="regexp">			data : 'New props'</span></span><br><span class="line"><span class="regexp">		&#125;)</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">	render()&#123;</span></span><br><span class="line"><span class="regexp">		return(</span></span><br><span class="line"><span class="regexp">			&lt;div&gt;</span></span><br><span class="line"><span class="regexp">			    &lt;Component data=&#123;this.state.data&#125;/</span>&gt;</span><br><span class="line">			    &lt;button onClick=&#123;() =&gt; &#123;<span class="keyword">this</span>.onPropsChange()&#125;&#125;&gt;改变Props&lt;<span class="regexp">/button&gt;	</span></span><br><span class="line"><span class="regexp">		    &lt;/</span>div&gt;</span><br><span class="line">			);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//点击按钮后的结果：</span></span><br><span class="line"><span class="comment">//初始化数据 constructor</span></span><br><span class="line"><span class="comment">//初始化数据 constructor</span></span><br><span class="line"><span class="comment">//componentWillMount</span></span><br><span class="line"><span class="comment">//render</span></span><br><span class="line"><span class="comment">//componentDidMount</span></span><br><span class="line"><span class="comment">//更新props</span></span><br><span class="line"><span class="comment">//componentWillReceiveProps</span></span><br><span class="line"><span class="comment">//shouldComponentUpdate</span></span><br><span class="line"><span class="comment">//componentWillUpdate</span></span><br><span class="line"><span class="comment">//render</span></span><br><span class="line"><span class="comment">//componenetDidUpdate</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Ummounting : 卸载阶段</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在上面代码的子组件Conponent中添加代码：</span></span><br><span class="line"><span class="comment">//卸载子(本)组件</span></span><br><span class="line"><span class="comment">//组件将要销毁</span></span><br><span class="line">	componentWillUnmount()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'componentWillUnmount'</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//更改上面代码的父组件App代码为：</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props)</span><br><span class="line">		<span class="keyword">this</span>.state=&#123;</span><br><span class="line">			data : <span class="string">'Old props'</span>,</span><br><span class="line">			hasChild: <span class="literal">true</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'初始化数据'</span>,<span class="string">'constructor'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	onPropsChange()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'更新props'</span>)</span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">			data : <span class="string">'New props'</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">	onDestoryChild()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'卸载子组件'</span>)</span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">			hasChild: <span class="literal">false</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">			    &#123;</span><br><span class="line">			    	<span class="keyword">this</span>.state.hasChild ? <span class="xml"><span class="tag">&lt;<span class="name">Component</span> <span class="attr">data</span>=<span class="string">&#123;this.state.data&#125;/</span>&gt;</span> : null</span></span><br><span class="line"><span class="xml">			    &#125;</span></span><br><span class="line"><span class="xml">			    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;this.onPropsChange()&#125;&#125;&gt;改变Props<span class="tag">&lt;/<span class="name">button</span>&gt;</span>	</span></span><br><span class="line"><span class="xml">			     <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;this.onDestoryChild()&#125;&#125;&gt;卸载子组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span>	</span></span><br><span class="line"><span class="xml">		    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">			);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//点击卸载按钮，结果：</span></span><br><span class="line"><span class="comment">//卸载子组件</span></span><br><span class="line"><span class="comment">//componentWillUnmount</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Error Handing : 错误处理（只处理render中的错误）</p>
</li>
</ul>
</li>
</ol>
<h2 id="Router原理以及React-Router"><a href="#Router原理以及React-Router" class="headerlink" title="Router原理以及React-Router"></a>Router原理以及React-Router</h2><h3 id="Router原理"><a href="#Router原理" class="headerlink" title="Router原理"></a>Router原理</h3><p>   Router指的是一种处理游览器中访问先后关系的机制，简单的说就是允许在不同页面中的跳转，然后记录跳转关系还能原路退回去的机制</p>
<p>   路由包含了三个主要部分：</p>
<ol>
<li><p>历史</p>
<blockquote>
<p>栈的数据结构，通过入栈和出栈记录访问页面的过程</p>
</blockquote>
</li>
<li><p>跳转</p>
<blockquote>
<p>负责路由在不同页面的跳转动作，并且可以传递参数</p>
</blockquote>
</li>
<li><p>事件</p>
<blockquote>
<p>打开新页面或者退回上一个页面时候触发的逻辑</p>
</blockquote>
</li>
</ol>
<p>   常见的Router:</p>
<ol>
<li><p>页面的Router</p>
<blockquote>
<p>最常用的Router,整页面的加载，回退也是整页面的加载</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.location.href = &apos;http://www.baidu.com&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Hash Router</p>
<blockquote>
<p>跳转时只有路径的hash值在发生变化，页面并没有重新加载</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接在游览器的console中输入</span></span><br><span class="line"><span class="built_in">window</span>.location.href = <span class="string">'#test1'</span></span><br><span class="line"><span class="comment">//网址不会重新加载，只会在网址路径上添加#test1</span></span><br><span class="line"><span class="built_in">window</span>.onhashchange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="string">'current hash:'</span>,<span class="built_in">window</span>.location.hash)&#125;</span><br><span class="line"><span class="comment">//输出结果：</span></span><br><span class="line"><span class="comment">//ƒ ()&#123;console.log('current hash:',window.location.hash)&#125;</span></span><br><span class="line"><span class="built_in">window</span>.location.href = <span class="string">'#test2'</span></span><br><span class="line"><span class="comment">//"#test2"</span></span><br><span class="line"><span class="comment">//current hash: #test2</span></span><br><span class="line"><span class="comment">//点击回退</span></span><br><span class="line"><span class="comment">//current hash: #test1</span></span><br><span class="line"><span class="comment">//这样就可以通过拿到的hash进行逻辑判断</span></span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="3">
<li><p>H5 Router</p>
<blockquote>
<p>类似Hash Router，但是能操控整个路径，既可以操作hash也可以操作路径，兼容性较差</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">history.pushState(<span class="string">'test'</span>,<span class="string">'Title'</span>,<span class="string">'#test'</span>)</span><br><span class="line"><span class="comment">//网址不会重新加载，只会在网址路径上添加#test</span></span><br><span class="line"></span><br><span class="line">history.pushState(<span class="string">'test'</span>,<span class="string">'Title'</span>,<span class="string">'/user/index'</span>)</span><br><span class="line"><span class="comment">//这里比Hash功能更加强大，可以引入一个地址</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onpopstate=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="built_in">console</span>.log(<span class="string">'H5 router change:'</span>,e.state)&#125;</span><br><span class="line"><span class="comment">//结果：ƒ (e)&#123;console.log('H5 router change:',e.state)&#125;</span></span><br><span class="line">history.pushState(<span class="string">'test'</span>,<span class="string">'Title'</span>,<span class="string">'/user/test'</span>)</span><br><span class="line"><span class="comment">//undefined</span></span><br><span class="line"><span class="comment">//点击回退</span></span><br><span class="line"><span class="comment">// H5 router change: test</span></span><br></pre></td></tr></table></figure>


</li>
</ol>
<pre><code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//常用的location值</span></span><br><span class="line"><span class="built_in">window</span>.location.href</span><br><span class="line"><span class="built_in">window</span>.location.pathname</span><br><span class="line"><span class="built_in">window</span>.location.hash</span><br><span class="line">windoe.location.search</span><br></pre></td></tr></table></figure></code></pre><h3 id="React-Router"><a href="#React-Router" class="headerlink" title="React-Router"></a>React-Router</h3><ul>
<li>React 官方提供的路由插件，单页应用必备</li>
<li>使用版本，<a href="mailto:react-router-dom@v4.2.2" target="_blank" rel="noopener">react-router-dom@v4.2.2</a></li>
<li>动态路由，纯react组件</li>
</ul>
<p>常用组件</p>
<ul>
<li><browserrouter>/<hashrouter>，路由方式</hashrouter></browserrouter></li>
<li><route>，路由规则</route></li>
<li><switch>，路由选项</switch></li>
<li><link>/<navlink>，跳转导航</navlink></li>
<li><redirect>，自动跳转</redirect></li>
</ul>
<p>代码用法：</p>
<ol>
<li><p>安装react-router-dom</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-router-dom@4.2.2</span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//HashRouter的使用</span></span><br><span class="line"><span class="keyword">import</span> &#123;HashRouter <span class="keyword">as</span> Router, Route, Link&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">			&lt;div&gt;Component A&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			);</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class B extends React.Component&#123;</span></span><br><span class="line"><span class="regexp">	constructor(props)&#123;</span></span><br><span class="line"><span class="regexp">		super(props)</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">	render()&#123;</span></span><br><span class="line"><span class="regexp">		return (</span></span><br><span class="line"><span class="regexp">			&lt;div&gt;Component B&lt;/</span>div&gt;</span><br><span class="line">			);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wrapper</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">		    &lt;Link to=<span class="string">"/a"</span> style=&#123;&#123;<span class="attr">color</span>:<span class="string">'yellow'</span>&#125;&#125;&gt;组件A&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">		    &lt;br/</span>&gt;</span><br><span class="line">		    &lt;Link to=<span class="string">"/b"</span> style=&#123;&#123;<span class="attr">color</span>:<span class="string">'yellow'</span>&#125;&#125;&gt;组件B&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">			&#123;this.props.children&#125;</span></span><br><span class="line"><span class="regexp">		&lt;/</span>div&gt;</span><br><span class="line">		);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">	&lt;Router&gt;</span><br><span class="line">	     &lt;Wrapper&gt;</span><br><span class="line">		    &lt;Route path=<span class="string">"/a"</span> component=&#123;A&#125;/&gt;</span><br><span class="line">			&lt;Route path=<span class="string">"/b"</span> component=&#123;B&#125;/&gt;</span><br><span class="line">		 &lt;<span class="regexp">/Wrapper&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>Router&gt;,</span><br><span class="line">	<span class="built_in">document</span>.getElementById(<span class="string">'app'</span>)</span><br><span class="line">	)</span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//BrowserRouter的使用</span></span><br><span class="line"><span class="comment">//BrowserRouter请求的是后端地址，当复制本地地址到其他页面打开的时候会出现404界面</span></span><br><span class="line"><span class="keyword">import</span> &#123;BrowserRouter <span class="keyword">as</span> Router, Route, Link&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//带参数的组件传递</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">			Component A</span><br><span class="line">			参数是：&#123;<span class="keyword">this</span>.props.match.params.id&#125;</span><br><span class="line">			&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			);</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class B extends React.Component&#123;</span></span><br><span class="line"><span class="regexp">	constructor(props)&#123;</span></span><br><span class="line"><span class="regexp">		super(props)</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">	render()&#123;</span></span><br><span class="line"><span class="regexp">		return (</span></span><br><span class="line"><span class="regexp">			&lt;div&gt;Component B&lt;/</span>div&gt;</span><br><span class="line">			);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wrapper</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">		    &lt;Link to=<span class="string">"/a"</span> style=&#123;&#123;<span class="attr">color</span>:<span class="string">'yellow'</span>&#125;&#125;&gt;组件A&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">		    &lt;br/</span>&gt;</span><br><span class="line">		    &lt;Link to=<span class="string">"/a/123"</span> style=&#123;&#123;<span class="attr">color</span>:<span class="string">'yellow'</span>&#125;&#125;&gt;带参数的组件A&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">		    &lt;br/</span>&gt;</span><br><span class="line">		    &lt;Link to=<span class="string">"/b"</span> style=&#123;&#123;<span class="attr">color</span>:<span class="string">'yellow'</span>&#125;&#125;&gt;组件B&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">			&#123;this.props.children&#125;</span></span><br><span class="line"><span class="regexp">		&lt;/</span>div&gt;</span><br><span class="line">		);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">	&lt;Router&gt;</span><br><span class="line">	     &lt;Wrapper&gt;</span><br><span class="line">            &lt;!--注意path的写法--&gt;</span><br><span class="line">		    &lt;Route path=<span class="string">"/a/:id"</span> component=&#123;A&#125;/&gt;</span><br><span class="line">			&lt;Route path=<span class="string">"/b"</span> component=&#123;B&#125;/&gt;</span><br><span class="line">		 &lt;<span class="regexp">/Wrapper&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>Router&gt;,</span><br><span class="line">	<span class="built_in">document</span>.getElementById(<span class="string">'app'</span>)</span><br><span class="line">	)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//怎么区分访问的是带参数的页面还是子页面？</span></span><br><span class="line"><span class="comment">//可以在子组件中建立一些Route然后用Switch标签进行包裹</span></span><br><span class="line"><span class="comment">//将匹配子页面的Route放在匹配擦书的Route上面即可解决</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">			Component A</span><br><span class="line">			&lt;Switch&gt;</span><br><span class="line">				&lt;Route exact path=&#123;<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.props.match.path&#125;</span>`</span>&#125; render=&#123;(route)=&gt;&#123;</span><br><span class="line">						<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>不带参数的组件A<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">					&#125;&#125;/&gt;</span><br><span class="line">				&lt;Route exact path=&#123;<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.props.match.path&#125;</span>/sub`</span>&#125; render=&#123;(route)=&gt;&#123;</span><br><span class="line">						<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>当前页面是Sub<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">					&#125;&#125;/&gt;	</span><br><span class="line">				&lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.props.match.path&#125;</span>/:id`</span>&#125; render=&#123;(route)=&gt;&#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>带参数的组件A,参数是：&#123;route.match.params.id&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">				&#125;&#125;/&gt;</span><br><span class="line">			&lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>div&gt;</span><br><span class="line">			);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">			&lt;div&gt;Component B&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			);</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Wrapper extends React.Component&#123;</span></span><br><span class="line"><span class="regexp">	constructor(props)&#123;</span></span><br><span class="line"><span class="regexp">		super(props)</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">	render()&#123;</span></span><br><span class="line"><span class="regexp">		return (</span></span><br><span class="line"><span class="regexp">		&lt;div&gt;</span></span><br><span class="line"><span class="regexp">		    &lt;Link to="/</span>a<span class="string">" style=&#123;&#123;color:'yellow'&#125;&#125;&gt;组件A&lt;/Link&gt;</span></span><br><span class="line"><span class="string">		    &lt;br/&gt;</span></span><br><span class="line"><span class="string">		    &lt;Link to="</span>/a/<span class="number">123</span><span class="string">" style=&#123;&#123;color:'yellow'&#125;&#125;&gt;带参数的组件A&lt;/Link&gt;</span></span><br><span class="line"><span class="string">		    &lt;br/&gt;</span></span><br><span class="line"><span class="string">		    &lt;Link to="</span>/b<span class="string">" style=&#123;&#123;color:'yellow'&#125;&#125;&gt;组件B&lt;/Link&gt;</span></span><br><span class="line"><span class="string">		     &lt;br/&gt;</span></span><br><span class="line"><span class="string">		    &lt;Link to="</span>/a/sub<span class="string">" style=&#123;&#123;color:'yellow'&#125;&#125;&gt;/a/sub&lt;/Link&gt;</span></span><br><span class="line"><span class="string">			&#123;this.props.children&#125;</span></span><br><span class="line"><span class="string">		&lt;/div&gt;</span></span><br><span class="line"><span class="string">		);</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ReactDOM.render(</span></span><br><span class="line"><span class="string">	&lt;Router&gt;</span></span><br><span class="line"><span class="string">	     &lt;Wrapper&gt;			</span></span><br><span class="line"><span class="string">		    &lt;Route path="</span>/a<span class="string">" component=&#123;A&#125;/&gt;</span></span><br><span class="line"><span class="string">			&lt;Route path="</span>/b<span class="string">" component=&#123;B&#125;/&gt;</span></span><br><span class="line"><span class="string">		 &lt;/Wrapper&gt;</span></span><br><span class="line"><span class="string">	&lt;/Router&gt;,</span></span><br><span class="line"><span class="string">	document.getElementById('app')</span></span><br><span class="line"><span class="string">	)</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="React数据管理"><a href="#React数据管理" class="headerlink" title="React数据管理"></a>React数据管理</h2><ol>
<li><p>自顶向下的传递机制，子组件通过props可以获得父组件的信息</p>
<p>但是在两个兄弟组件之间传递数据就需要状态提升(即把状态放在公共父组件里)来进行交互。此处详情参考上文React框架基础指南(1)中的深入了解React之React组件。（适用于低数据量）</p>
</li>
<li><p>通过发布订阅模式做数据交互</p>
<blockquote>
<p>类似观察者模式，通过订阅中心替代祖先组件</p>
<p>子组件A发给订阅中心一个事件，事件中会带着一些信息(参数)，订阅中心再通过子组件B提供的数据接收方法，把信息传递给子组件B，从而达到数据更新的目的（适用于低数据量，事件是暴露的，不利于数据管理，容易造成数据的冲突和混乱）</p>
</blockquote>
</li>
<li><p>Redux等数据管理工具</p>
<blockquote>
<p>Redux单向数据流</p>
<p>类似于状态提升和发布订阅两种方式的结合</p>
<p>将所有的状态都保存在根组件(Store)中，处了Store还有一个Reducer,相当于Store中状态的管家，当子组件A想给子组件B做通信的时候，就从子组件A发出一个action，action中定义了需要做些什么，Reducer会接收到这个action,然后根据原有状态和这个action生成一个新的状态state传递给根组件也就是Store，当根组件发生变化的时候，就会驱动子组件B发生更新，也就完成了数据通信，可以解决数据流向混乱的问题，适用于大型数据的引用，不过需要引用的模块和概念较多，增加了系统的复杂性</p>
</blockquote>
</li>
<li><p>应用场景</p>
<ul>
<li>状态提升：组件层级扁平，兄弟组件通信情况很少（比如后台管理系统），大多是父子组件间的通信</li>
<li>发布订阅：业务规模较小，层级较深的业务</li>
<li>Redux：业务复杂，组件层级较深，兄弟组件通信密切</li>
</ul>
</li>
</ol>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Heaiwei</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="https://heaiwei.github.io/2020/02/28/React基础02/">https://heaiwei.github.io/2020/02/28/React基础02/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://heaiwei.github.io">何先生的博客</a>！</span></div></div></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2020/03/01/项目开发知识汇总/"><i class="fas fa-angle-left">&nbsp;</i><span>电商后台管理系统知识汇总</span></a></div><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2020/02/25/React基础01/"><span>React框架基础指南(1)</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2019 ～ 2020 By Heaiwei</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--></body></html>